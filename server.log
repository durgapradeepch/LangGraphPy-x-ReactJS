INFO:     llm_client.py:47    - âœ… LLM clients initialized. Main: gpt-4o, Router: gpt-4o-mini
INFO:     cust_logger.py:68    - Set message color for graph.py to MAGENTA
INFO:     cust_logger.py:68    - Set message color for server.py to PURPLE
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:50:36.634625", "uuid": null, "received": {"uuid": "test-1764748236623", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T02:50:36.635070", "uuid": "test-1764748236623", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T02:51:28.358399", "uuid": "test-1764748236623", "op": "Error: (1001, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T02:51:28.358609", "uuid": "test-1764748236623", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T02:51:28.358751", "uuid": "test-1764748236623", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:51:29.336066", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T02:51:29.336320", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:52:24.884147", "uuid": null, "received": {"uuid": "tomorrow-shade-grabbed-indicate", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T02:52:24.884284", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:52:33.325664", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "hi", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'hi...': Simple Mode
INFO:     graph.py:187   - {"timestamp": "2025-12-03T02:52:35.412602", "uuid": "exist-complex-pair-rush", "llm_method": "on_chat_model_end", "sent": "Hello! How can I assist you today?"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:52:45.403177", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "Show me incident 1507 and all its affected resources with their complete details", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Show me incident 1507 and all its affected resourc...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Show me incident 1507 and all its affected resourc...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Show me incident 1507 and all its affected resources with their complete details'
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:290   - âœ… Created MCP client for session default
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     mcp_client.py:57    - âœ… Fetched 47 MCP tools from server
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Show me incident 1507 and all its affected resourc...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: 1507 | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 1 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "get_incident_by_id",
    "parameters": {
      "incident_id": "1507"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.9
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 1 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_incident_by_id (attempt 1/2)
INFO:     mcp_client.py:290   - âœ… Created MCP client for session exist-complex-pair-rush
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_incident_by_id
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"incident_id": 1507}
INFO:     mcp_client.py:127   - âœ… Tool get_incident_by_id executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:76    - â­ï¸  No IDs found in search results, skipping expansion
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=1, empty_list=['get_incident_by_id']
INFO:     llm_client.py:724   - ğŸ’¡ No results found for exact query. Attempting broader search for suggestions...
INFO:     llm_client.py:745   - ğŸ” Empty tools: ['get_incident_by_id'], Search terms: ['1507', 'affected', 'resources', 'with', 'their', 'complete', 'details']
INFO:     llm_client.py:945   - ğŸ” _find_similar_entities called with search_terms: ['1507', 'affected', 'resources', 'with', 'their', 'complete', 'details'], empty_tools: ['get_incident_by_id']
INFO:     llm_client.py:949   - ğŸ” MCP client from state: True
INFO:     llm_client.py:989   - ğŸ” Extracted keywords for suggestion search: ['1507', 'affected', 'resources', 'with', 'their']
INFO:     llm_client.py:991   - ğŸ” Searching for similar entities with keywords: ['1507', 'affected', 'resources', 'with', 'their', 'complete', 'details']
WARNING:     llm_client.py:1024  - âš ï¸ No search mapping found for tool: get_incident_by_id
INFO:     llm_client.py:1086  - â„¹ï¸ No similar entities found with broader search
INFO:     llm_client.py:747   - ğŸ” Suggestions returned: False
WARNING:     llm_client.py:753   - âš ï¸ No suggestions found or suggestion search failed
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': "I attempted to retrieve information regarding incident 1507, but unfortunately, there were no results found for this specific incident. This means that the data available does not 
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 850 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T02:52:57.597608", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "I attempted to retrieve information regarding incident 1507, but unfortunately, there were no result"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:55:33.831694", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "Give me all GCP incidents, their related resources, open tickets, and recent notifications", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Give me all GCP incidents, their related resources...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Give me all GCP incidents, their related resources...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Give me all GCP incidents, their related resources, open tickets, and recent notifications'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 2 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 2 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Give me all GCP incidents, their related resources...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 4 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "GCP"
    }
  },
  {
    "name": "search_resources",
    "parameters": {
      "query": "GCP"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "GCP"
    }
  },
  {
    "name": "get_notifications",
    "parameters": {}
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 4 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "GCP"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 2 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_resources (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_resources
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "GCP"}
INFO:     mcp_client.py:127   - âœ… Tool search_resources executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "GCP"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:153   - âœ… Extracted incident_id: 1500 (GCP Rule Update impact )
INFO:     comprehensive_query_agent.py:142   - âœ… Extracted resource_id: 51653170 (runtime-gcp-607-worker-sync-55bff56bc4-62ljw)
INFO:     comprehensive_query_agent.py:170   - âœ… Extracted ticket_id: 4985705
INFO:     comprehensive_query_agent.py:84    - ğŸ“‹ Single-entity comprehensive query detected.
INFO:     comprehensive_query_agent.py:100   - ğŸ”„ Comprehensive query detected (comprehensive=False, scope=all) with IDs: {'incident_id': 1500, 'incident_title': 'GCP Rule Update impact ', 'resource_id': 51653170, 'resource_name': 'runtime-gcp-607-worker-sync-55bff56bc4-62ljw', 'ticket_id': 4985705}
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=True, extracted_ids={'incident_id': 1500, 'incident_title': 'GCP Rule Update impact ', 'resource_id': 51653170, 'resource_name': 'runtime-gcp-607-worker-sync-55bff56bc4-62ljw', 'ticket_id': 4985705}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=True, extracted_ids={'incident_id': 1500, 'incident_title': 'GCP Rule Update impact ', 'resource_id': 51653170, 'resource_name': 'runtime-gcp-607-worker-sync-55bff56bc4-62ljw', 'ticket_id': 4985705}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:147   - ğŸ”„ Comprehensive Follow-up: Creating and executing follow-up plan
INFO:     comprehensive_query_agent.py:222   - ğŸ“‹ Created comprehensive resource plan for ID: 51653170
INFO:     comprehensive_query_agent.py:231   - ğŸ“‹ Created comprehensive incident plan for ID: 1500
INFO:     comprehensive_query_agent.py:258   - âœ… Follow-up plan created with 8 tools
INFO:     workflow.py:172   - ğŸ”„ Executing 8 comprehensive follow-up tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 8 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_by_id (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_by_id
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_by_id executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_version (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_version
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_version executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_metadata (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_metadata
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_metadata executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_changelog_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_changelog_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_changelog_by_resource executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51653170}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications_by_resource executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_incident_by_id (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_incident_by_id
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"incident_id": 1500}
INFO:     mcp_client.py:127   - âœ… Tool get_incident_by_id executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_incident_changelogs (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_incident_changelogs
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"incident_id": 1500}
INFO:     mcp_client.py:127   - âœ… Tool get_incident_changelogs executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:182   - âœ… Comprehensive follow-up execution completed
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications: 3 items
INFO:     llm_client.py:515   - ğŸ” DEBUG get_changelog_by_resource - result keys: ['resource_id', 'changelogs', 'count', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG get_changelog_by_resource - found 'changelogs' array with 1 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 1 changelogs for get_changelog_by_resource
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_changelog_by_resource: 1 items
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications_by_resource: 0 items
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_incident_changelogs: 0 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=6, total_tools=12, empty_list=['get_resource_version', 'get_resource_metadata', 'get_resource_tickets', 'get_notifications_by_resource', 'get_incident_by_id', 'get_incident_changelogs']
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The data reveals two significant incidents related to Google Cloud Platform (GCP). The first incident, identified as **Incident 1500**, is titled "GCP Rule Update impact" and is cl
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 2040 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T02:56:27.236414", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The data reveals two significant incidents related to Google Cloud Platform (GCP). The first inciden"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:58:14.298757", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "Tell me everything about vector-0 resource including incidents, tickets, and changelogs", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Tell me everything about vector-0 resource includi...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Tell me everything about vector-0 resource includi...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Tell me everything about vector-0 resource including incidents, tickets, and changelogs'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 4 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 4 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     mcp_client.py:57    - âœ… Fetched 47 MCP tools from server
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Tell me everything about vector-0 resource includi...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: vector-0
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 4 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_resources",
    "parameters": {
      "query": "vector-0"
    }
  },
  {
    "name": "search_incidents",
    "parameters": {
      "query": "vector-0"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "vector-0"
    }
  },
  {
    "name": "search_changelogs",
    "parameters": {
      "query": "vector-0"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.9
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 4 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_resources (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_resources
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "vector-0"}
INFO:     mcp_client.py:127   - âœ… Tool search_resources executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "vector-0"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "vector-0"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_changelogs (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_changelogs
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "vector-0"}
INFO:     mcp_client.py:127   - âœ… Tool search_changelogs executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:142   - âœ… Extracted resource_id: 50944068 (vector-0)
INFO:     comprehensive_query_agent.py:170   - âœ… Extracted ticket_id: 4985705
INFO:     comprehensive_query_agent.py:84    - ğŸ“‹ Single-entity comprehensive query detected.
INFO:     comprehensive_query_agent.py:100   - ğŸ”„ Comprehensive query detected (comprehensive=True, scope=single) with IDs: {'resource_id': 50944068, 'resource_name': 'vector-0', 'ticket_id': 4985705}
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=True, extracted_ids={'resource_id': 50944068, 'resource_name': 'vector-0', 'ticket_id': 4985705}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=True, extracted_ids={'resource_id': 50944068, 'resource_name': 'vector-0', 'ticket_id': 4985705}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:147   - ğŸ”„ Comprehensive Follow-up: Creating and executing follow-up plan
INFO:     comprehensive_query_agent.py:222   - ğŸ“‹ Created comprehensive resource plan for ID: 50944068
INFO:     comprehensive_query_agent.py:258   - âœ… Follow-up plan created with 6 tools
INFO:     workflow.py:172   - ğŸ”„ Executing 6 comprehensive follow-up tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 6 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_by_id (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_by_id
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_by_id executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_version (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_version
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_version executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_metadata (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_metadata
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_metadata executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_changelog_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_changelog_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_changelog_by_resource executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 50944068}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications_by_resource executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:182   - âœ… Comprehensive follow-up execution completed
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:515   - ğŸ” DEBUG search_changelogs - result keys: ['changelogs', 'count', 'count_is_exact', 'is_limited', 'page', 'page_size', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG search_changelogs - found 'changelogs' array with 20 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 20 changelogs for search_changelogs
INFO:     llm_client.py:719   - ğŸ” Preprocessed search_changelogs: 3 items
INFO:     llm_client.py:515   - ğŸ” DEBUG get_changelog_by_resource - result keys: ['resource_id', 'changelogs', 'count', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG get_changelog_by_resource - found 'changelogs' array with 5 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 5 changelogs for get_changelog_by_resource
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_changelog_by_resource: 3 items
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications_by_resource: 0 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=5, total_tools=10, empty_list=['search_incidents', 'get_resource_version', 'get_resource_metadata', 'get_resource_tickets', 'get_notifications_by_resource']
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The resource known as **vector-0** is a Kubernetes Pod workload, identified by the ID 50944068. It is currently in an Active status and was created on November 26, 2025. This resou
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 1773 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T02:58:49.581402", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The resource known as **vector-0** is a Kubernetes Pod workload, identified by the ID 50944068. It i"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:58:59.543706", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "hat incidents happened on 'Mit-runtime-api-services'?", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'hat incidents happened on 'Mit-runtime-api-service...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: hat incidents happened on 'Mit-runtime-api-service...
INFO:     workflow.py:254   - ğŸš€ Processing: 'hat incidents happened on 'Mit-runtime-api-services'?'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 6 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 6 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'hat incidents happened on 'Mit-runtime-api-service...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: incident_analysis
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: Mit-runtime-api-services
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 1 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "Mit-runtime-api-services"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=incident_analysis, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 1 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "Mit-runtime-api-services"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:68    - â­ï¸  Not a comprehensive query (comprehensive=False, scope=multiple, intent=search for, multi_entity=False)
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=1, empty_list=['search_incidents']
INFO:     llm_client.py:724   - ğŸ’¡ No results found for exact query. Attempting broader search for suggestions...
INFO:     llm_client.py:745   - ğŸ” Empty tools: ['search_incidents'], Search terms: ['Mit-runtime-api-services']
INFO:     llm_client.py:945   - ğŸ” _find_similar_entities called with search_terms: ['Mit-runtime-api-services'], empty_tools: ['search_incidents']
INFO:     llm_client.py:949   - ğŸ” MCP client from state: True
INFO:     llm_client.py:989   - ğŸ” Extracted keywords for suggestion search: ['runtime', 'services']
INFO:     llm_client.py:991   - ğŸ” Searching for similar entities with keywords: ['runtime', 'services']
INFO:     llm_client.py:1027  - ğŸ” Searching with tool: search_incidents for result_key: incidents
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime", "limit": 5}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 2 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     llm_client.py:1042  - ğŸ” Extracted 2 entities with key 'incidents'
INFO:     llm_client.py:1049  - ğŸ” Processing 2 entities for keyword 'runtime'
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1507, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1507: 'Incident on runtime api' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1507
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1499, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1499: 'Runtime-aws-api's are not working ' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1499
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "services", "limit": 5}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 6 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     llm_client.py:1042  - ğŸ” Extracted 6 entities with key 'incidents'
INFO:     llm_client.py:1049  - ğŸ” Processing 3 entities for keyword 'services'
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1527, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1527: 'Acme-cart-services are down' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1527
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1529, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1529: 'acme-cart-services are down' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1529
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1502, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1502: 'Services are down' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1502
INFO:     llm_client.py:1083  - âœ… Found 5 similar items
INFO:     llm_client.py:747   - ğŸ” Suggestions returned: True
INFO:     llm_client.py:750   - âœ… Adding 5 suggestions to tool_data
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'I couldn\'t find an exact match for \'Mit-runtime-api-services\'. However, I found these similar items:\nIncident 1507: "Incident on runtime api" with high severity, currently in a
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 694 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T02:59:09.029652", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "I couldn't find an exact match for 'Mit-runtime-api-services'. However, I found these similar items:"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T02:59:56.760008", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "List all CrashLoopBackOff resources and show me incidents that affected them", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'List all CrashLoopBackOff resources and show me in...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: List all CrashLoopBackOff resources and show me in...
INFO:     workflow.py:254   - ğŸš€ Processing: 'List all CrashLoopBackOff resources and show me incidents that affected them'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 8 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 8 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'List all CrashLoopBackOff resources and show me in...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 2 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_resources",
    "parameters": {
      "query": "CrashLoopBackOff"
    }
  },
  {
    "name": "search_incidents",
    "parameters": {
      "query": "CrashLoopBackOff"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 2 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_resources (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_resources
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "CrashLoopBackOff"}
INFO:     mcp_client.py:127   - âœ… Tool search_resources executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "CrashLoopBackOff"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:76    - â­ï¸  No IDs found in search results, skipping expansion
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=2, total_tools=2, empty_list=['search_resources', 'search_incidents']
INFO:     llm_client.py:724   - ğŸ’¡ No results found for exact query. Attempting broader search for suggestions...
INFO:     llm_client.py:745   - ğŸ” Empty tools: ['search_resources', 'search_incidents'], Search terms: ['CrashLoopBackOff']
INFO:     llm_client.py:945   - ğŸ” _find_similar_entities called with search_terms: ['CrashLoopBackOff'], empty_tools: ['search_resources', 'search_incidents']
INFO:     llm_client.py:949   - ğŸ” MCP client from state: True
INFO:     llm_client.py:989   - ğŸ” Extracted keywords for suggestion search: ['crashloopbackoff']
INFO:     llm_client.py:991   - ğŸ” Searching for similar entities with keywords: ['crashloopbackoff']
INFO:     llm_client.py:1027  - ğŸ” Searching with tool: search_resources for result_key: resources
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_resources
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "crashloopbackoff", "limit": 5}
INFO:     mcp_client.py:127   - âœ… Tool search_resources executed successfully
INFO:     llm_client.py:1042  - ğŸ” Extracted 0 entities with key 'resources'
WARNING:     llm_client.py:1045  - âš ï¸ No entities found for keyword 'crashloopbackoff' with key 'resources'
INFO:     llm_client.py:1027  - ğŸ” Searching with tool: search_incidents for result_key: incidents
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "crashloopbackoff", "limit": 5}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     llm_client.py:1042  - ğŸ” Extracted 0 entities with key 'incidents'
WARNING:     llm_client.py:1045  - âš ï¸ No entities found for keyword 'crashloopbackoff' with key 'incidents'
INFO:     llm_client.py:1086  - â„¹ï¸ No similar entities found with broader search
INFO:     llm_client.py:747   - ğŸ” Suggestions returned: False
WARNING:     llm_client.py:753   - âš ï¸ No suggestions found or suggestion search failed
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The available data does not provide any information about resources experiencing a "CrashLoopBackOff" status. The search for such resources returned no results, indicating that the
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 612 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T03:00:34.021386", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The available data does not provide any information about resources experiencing a \"CrashLoopBackOff"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T03:00:51.982489", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Compare incidents, tickets, and notifications for ...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Compare incidents, tickets, and notifications for ...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 10 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 10 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Compare incidents, tickets, and notifications for ...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 6 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "get_notifications",
    "parameters": {}
  },
  {
    "name": "search_incidents",
    "parameters": {
      "query": "runtime-api"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "runtime-api"
    }
  },
  {
    "name": "get_notifications",
    "parameters": {}
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 6 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 2 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:68    - â­ï¸  Not a comprehensive query (comprehensive=False, scope=multiple, intent=compare, multi_entity=True)
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications: 3 items
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications: 3 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=6, empty_list=['search_incidents']
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'In comparing the incidents, tickets, and notifications for **acme-cart-services** and **runtime-api**, we observe distinct differences in the available data.\nFor **acme-cart-servi
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 1792 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T03:01:07.721583", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "In comparing the incidents, tickets, and notifications for **acme-cart-services** and **runtime-api*"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T03:02:19.149533", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "what is the reason for the failure in ai-acme cart?\n", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'what is the reason for the failure in ai-acme cart...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: what is the reason for the failure in ai-acme cart...
INFO:     workflow.py:254   - ğŸš€ Processing: 'what is the reason for the failure in ai-acme cart?
'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 10 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 10 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'what is the reason for the failure in ai-acme cart...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: root_cause
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: ai-acme cart
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 1 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "ai-acme cart failure"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=root_cause, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 1 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "ai-acme cart failure"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:76    - â­ï¸  No IDs found in search results, skipping expansion
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=1, empty_list=['search_incidents']
INFO:     llm_client.py:724   - ğŸ’¡ No results found for exact query. Attempting broader search for suggestions...
INFO:     llm_client.py:745   - ğŸ” Empty tools: ['search_incidents'], Search terms: ['failure']
INFO:     llm_client.py:945   - ğŸ” _find_similar_entities called with search_terms: ['failure'], empty_tools: ['search_incidents']
INFO:     llm_client.py:949   - ğŸ” MCP client from state: True
INFO:     llm_client.py:989   - ğŸ” Extracted keywords for suggestion search: ['failure']
INFO:     llm_client.py:991   - ğŸ” Searching for similar entities with keywords: ['failure']
INFO:     llm_client.py:1027  - ğŸ” Searching with tool: search_incidents for result_key: incidents
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "failure", "limit": 5}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 1 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     llm_client.py:1042  - ğŸ” Extracted 1 entities with key 'incidents'
INFO:     llm_client.py:1049  - ğŸ” Processing 1 entities for keyword 'failure'
INFO:     llm_client.py:1052  - ğŸ” Entity ID: 1487, Type: <class 'int'>
INFO:     llm_client.py:1061  - ğŸ” Suggestion text: Incident 1487: 'Pod Failure' (High severity)
INFO:     llm_client.py:1073  - âœ… Added suggestion for entity 1487
INFO:     llm_client.py:1083  - âœ… Found 1 similar items
INFO:     llm_client.py:747   - ğŸ” Suggestions returned: True
INFO:     llm_client.py:750   - âœ… Adding 1 suggestions to tool_data
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The root cause of the failure in the ai-acme cart is not clear from the available data. The search for incidents specifically related to "ai-acme cart" did not yield any results, i
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 650 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T03:02:30.348803", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The root cause of the failure in the ai-acme cart is not clear from the available data. The search f"}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T03:11:59.323232", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T03:11:59.324092", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T03:11:59.324224", "uuid": "tomorrow-shade-grabbed-indicate", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T03:11:59.328359", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T03:11:59.328511", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T03:11:59.328644", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T03:12:02.312817", "uuid": null, "received": {"uuid": "tomorrow-shade-grabbed-indicate", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T03:12:02.313054", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T03:12:03.276755", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T03:12:03.277077", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T08:32:02.129855", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T08:32:02.132205", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T08:32:02.133352", "uuid": "tomorrow-shade-grabbed-indicate", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T08:32:02.133846", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T08:32:02.133919", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T08:32:02.133967", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T08:32:05.136265", "uuid": null, "received": {"uuid": "tomorrow-shade-grabbed-indicate", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T08:32:05.136510", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T08:32:05.172820", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T08:32:05.173063", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T09:04:26.705922", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "for this change event 'dev.update_product_price', what are the related resources ( i.e, changelog_resources )", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'for this change event 'dev.update_product_price', ...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: for this change event 'dev.update_product_price', ...
INFO:     workflow.py:254   - ğŸš€ Processing: 'for this change event 'dev.update_product_price', what are the related resources ( i.e, changelog_resources )'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 10 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 10 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     mcp_client.py:57    - âœ… Fetched 47 MCP tools from server
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'for this change event 'dev.update_product_price', ...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: exploration
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 1 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_changelogs",
    "parameters": {
      "query": "dev.update_product_price"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=exploration, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 1 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_changelogs (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_changelogs
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "dev.update_product_price"}
INFO:     mcp_client.py:127   - âœ… Tool search_changelogs executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:76    - â­ï¸  No IDs found in search results, skipping expansion
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:515   - ğŸ” DEBUG search_changelogs - result keys: ['changelogs', 'count', 'count_is_exact', 'is_limited', 'page', 'page_size', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG search_changelogs - found 'changelogs' array with 20 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 20 changelogs for search_changelogs
INFO:     llm_client.py:719   - ğŸ” Preprocessed search_changelogs: 20 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=0, total_tools=1, empty_list=[]
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The available data does not provide specific information about the change event \'dev.update_product_price\' or its related resources (changelog_resources). The search results incl
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 709 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T09:04:40.796607", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The available data does not provide specific information about the change event 'dev.update_product_"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T09:06:28.404204", "uuid": null, "received": {"uuid": "similar-atmosphere-once-between", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T09:06:28.404644", "uuid": "similar-atmosphere-once-between", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T09:50:47.151534", "uuid": "similar-atmosphere-once-between", "op": "Error: (1001, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T09:50:47.158531", "uuid": "similar-atmosphere-once-between", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T09:50:47.158862", "uuid": "similar-atmosphere-once-between", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T09:59:09.832392", "uuid": null, "op": "Error: Expecting value: line 1 column 1 (char 0)"}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T09:59:46.219962", "uuid": null, "op": "Error: Expecting value: line 1 column 1 (char 0)"}
INFO:     server.py:53    - {"timestamp": "2025-12-03T10:00:11.582828", "uuid": null, "received": {"uuid": "test-api-comparison", "message": "", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T10:00:11.582917", "uuid": "test-api-comparison", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T10:00:12.084049", "uuid": "test-api-comparison", "received": {"uuid": "test-api-comparison", "message": "Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Compare incidents, tickets, and notifications for ...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Compare incidents, tickets, and notifications for ...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api'
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     mcp_client.py:57    - âœ… Fetched 47 MCP tools from server
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session test-api-comparison
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Compare incidents, tickets, and notifications for ...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 5 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "get_notifications",
    "parameters": {}
  },
  {
    "name": "search_incidents",
    "parameters": {
      "query": "runtime-api"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "runtime-api"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.9
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 5 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:290   - âœ… Created MCP client for session test-api-comparison
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 2 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:68    - â­ï¸  Not a comprehensive query (comprehensive=False, scope=multiple, intent=compare, multi_entity=True)
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications: 3 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=5, empty_list=['search_incidents']
ERROR:     llm_client.py:874   - Response generation failed: 
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': "I'm having trouble connecting to the tools right now.", 'forward_links': [], 'recommendations': [], 'insights': {}}
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 53 chars
WARNING:     response_enrichment_agent.py:70    - âš ï¸ Low enrichment quality score: 0.40
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 0 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
WARNING:     graph.py:153   - âš ï¸ WebSocket already closed when trying to send completion: Cannot call "send" once a close message has been sent.
ERROR:     server.py:73    - {"timestamp": "2025-12-03T10:00:24.203550", "uuid": "test-api-comparison", "op": "Error: WebSocket is not connected. Need to call \"accept\" first."}
INFO:     server.py:77    - {"timestamp": "2025-12-03T10:00:24.203603", "uuid": "test-api-comparison", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T10:00:24.203649", "uuid": "test-api-comparison", "op": "WebSocket close error: Cannot call \"send\" once a close message has been sent."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T10:00:38.789425", "uuid": null, "received": {"uuid": "test-api-comparison", "message": "", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T10:00:38.789516", "uuid": "test-api-comparison", "op": "Initializing ws with client."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T10:00:39.291481", "uuid": "test-api-comparison", "received": {"uuid": "test-api-comparison", "message": "Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'Compare incidents, tickets, and notifications for ...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: Compare incidents, tickets, and notifications for ...
INFO:     workflow.py:254   - ğŸš€ Processing: 'Compare incidents, tickets, and notifications for acme-cart-services vs runtime-api'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: test-api-comparison
INFO:     workflow.py:272   - ğŸ’¬ Loaded 2 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 2 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session test-api-comparison
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'Compare incidents, tickets, and notifications for ...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: multi_entity_summary
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 5 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_incidents",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "acme-cart-services"
    }
  },
  {
    "name": "get_notifications",
    "parameters": {}
  },
  {
    "name": "search_incidents",
    "parameters": {
      "query": "runtime-api"
    }
  },
  {
    "name": "search_tickets",
    "parameters": {
      "query": "runtime-api"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=multi_entity_summary, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 5 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 2 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "acme-cart-services"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_incidents (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_incidents
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:165   - ğŸ” MCP DEBUG - Tool search_incidents returned 0 incidents
INFO:     mcp_client.py:127   - âœ… Tool search_incidents executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "runtime-api"}
INFO:     mcp_client.py:127   - âœ… Tool search_tickets executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:68    - â­ï¸  Not a comprehensive query (comprehensive=False, scope=multiple, intent=compare, multi_entity=True)
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=False, extracted_ids={}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=False, extracted_ids={}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:144   - â­ï¸  Comprehensive follow-up not needed, skipping
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications: 3 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=1, total_tools=5, empty_list=['search_incidents']
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'In examining the incidents, tickets, and notifications for "acme-cart-services" and "runtime-api," we find distinct differences in the data available for each. For "acme-cart-servi
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 1934 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
WARNING:     graph.py:153   - âš ï¸ WebSocket already closed when trying to send completion: 
ERROR:     server.py:73    - {"timestamp": "2025-12-03T10:01:08.582758", "uuid": "test-api-comparison", "op": "Error: WebSocket is not connected. Need to call \"accept\" first."}
INFO:     server.py:77    - {"timestamp": "2025-12-03T10:01:08.582793", "uuid": "test-api-comparison", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T10:01:08.582821", "uuid": "test-api-comparison", "op": "WebSocket close error: Cannot call \"send\" once a close message has been sent."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T10:01:20.860967", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Error: (1001, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T10:01:20.862040", "uuid": "tomorrow-shade-grabbed-indicate", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T10:01:20.862250", "uuid": "tomorrow-shade-grabbed-indicate", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T10:01:42.699570", "uuid": "exist-complex-pair-rush", "received": {"uuid": "exist-complex-pair-rush", "message": "for this change event 'dev.update_product_price', what are the related resources ( i.e, changelog_resources )", "init": false}}
INFO:     graph.py:115   - ğŸš¦ Routing query through semantic LLM router...
INFO:     llm_client.py:118   - ğŸš¦ Router (gpt-4o-mini) decision for 'for this change event 'dev.update_product_price', ...': Enhanced Mode
INFO:     graph.py:121   - ğŸš€ Using enhanced workflow for: for this change event 'dev.update_product_price', ...
INFO:     workflow.py:254   - ğŸš€ Processing: 'for this change event 'dev.update_product_price', what are the related resources ( i.e, changelog_resources )'
INFO:     workflow.py:268   - ğŸ“š Found existing conversation state for thread: exist-complex-pair-rush
INFO:     workflow.py:272   - ğŸ’¬ Loaded 10 previous messages from conversation history
INFO:     workflow.py:284   - âœ… Preserved 10 messages from previous conversation
INFO:     workflow.py:79    - ğŸ¯ Orchestrator: Starting workflow
INFO:     mcp_client.py:229   - ğŸ“‹ Fetching available MCP tools
INFO:     workflow.py:86    - ğŸ“‹ Loaded 47 available MCP tools
INFO:     orchestrator.py:36    - ğŸ¯ Orchestrator validating workflow for session exist-complex-pair-rush
INFO:     orchestrator.py:41    - ğŸ” State validation: âœ… PASSED
INFO:     orchestrator.py:55    - âœ… Orchestrator validation passed
INFO:     workflow.py:105   - ğŸ” Query Analysis: Analyzing user query
INFO:     query_analysis_agent.py:26    - ğŸ” Analyzing query: 'for this change event 'dev.update_product_price', ...'
INFO:     llm_client.py:210   - ğŸ” Query analyzed: exploration
INFO:     llm_client.py:211   - ğŸ¯ IDs extracted: None | Service Name: None
INFO:     llm_client.py:420   - ğŸ“‹ Tool plan created: 2 tools planned
INFO:     query_analysis_agent.py:44    - ğŸ“‹ Tool plan: [
  {
    "name": "search_changelogs",
    "parameters": {
      "query": "dev.update_product_price"
    }
  },
  {
    "name": "search_resources",
    "parameters": {
      "query": "dev.update_product_price"
    }
  }
]
INFO:     query_analysis_agent.py:64    - âœ… Query analyzed: type=exploration, confidence=0.8
INFO:     workflow.py:110   - ğŸ› ï¸ Tool Execution: Executing MCP tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 2 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_changelogs (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_changelogs
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "dev.update_product_price"}
INFO:     mcp_client.py:127   - âœ… Tool search_changelogs executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing search_resources (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: search_resources
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"query": "dev.update_product_price"}
INFO:     mcp_client.py:127   - âœ… Tool search_resources executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:129   - ğŸ” Comprehensive Check: Analyzing if follow-up needed
INFO:     comprehensive_query_agent.py:142   - âœ… Extracted resource_id: 51696264 (dev.update_product_price)
INFO:     comprehensive_query_agent.py:84    - ğŸ“‹ Single-entity comprehensive query detected.
INFO:     comprehensive_query_agent.py:100   - ğŸ”„ Comprehensive query detected (comprehensive=False, scope=single) with IDs: {'resource_id': 51696264, 'resource_name': 'dev.update_product_price'}
INFO:     workflow.py:131   - ğŸ” Comprehensive Check Result: needs_followup=True, extracted_ids={'resource_id': 51696264, 'resource_name': 'dev.update_product_price'}
INFO:     workflow.py:140   - ğŸ” Followup Node Check: needs_followup=True, extracted_ids={'resource_id': 51696264, 'resource_name': 'dev.update_product_price'}
INFO:     workflow.py:141   - ğŸ” Full state keys: ['user_query', 'session_id', 'request_id', 'timestamp', 'query_type', 'intent', 'entities', 'confidence_score', 'specificity_level', 'query_analysis', 'available_tools', 'tool_plan', 'execution_plan', 'execution_strategy', 'executed_tools', 'current_tool_index', 'multi_query_results', 'aggregated_context', 'sub_query_id', 'mcp_results', 'context_data', 'conversation_history', 'incident_analysis', 'root_cause_analysis', 'timeline_data', 'enrichment_data', 'forward_links', 'annotations', 'final_response', 'workflow_status', 'current_agent', 'error_count', 'retry_attempts', 'data_quality_score', 'response_completeness', 'investigation_depth', 'needs_comprehensive_followup', 'extracted_ids', 'followup_tool_plan', 'completion_timestamp', 'multi_query_summary']
INFO:     workflow.py:147   - ğŸ”„ Comprehensive Follow-up: Creating and executing follow-up plan
INFO:     comprehensive_query_agent.py:222   - ğŸ“‹ Created comprehensive resource plan for ID: 51696264
INFO:     comprehensive_query_agent.py:258   - âœ… Follow-up plan created with 6 tools
INFO:     workflow.py:172   - ğŸ”„ Executing 6 comprehensive follow-up tools
INFO:     tool_execution_agent.py:37    - ğŸ› ï¸ Executing 6 tools
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_by_id (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_by_id
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_by_id executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_version (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_version
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_version executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_metadata (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_metadata
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_metadata executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_resource_tickets (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_resource_tickets
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_resource_tickets executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_changelog_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_changelog_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_changelog_by_resource executed successfully
INFO:     tool_execution_agent.py:92    - ğŸ”§ Executing get_notifications_by_resource (attempt 1/2)
INFO:     mcp_client.py:120   - ğŸ”§ Executing MCP tool: get_notifications_by_resource
INFO:     mcp_client.py:121   - ğŸ”§ Tool parameters: {"resource_id": 51696264}
INFO:     mcp_client.py:127   - âœ… Tool get_notifications_by_resource executed successfully
INFO:     tool_execution_agent.py:60    - âœ… Tool execution completed: 100.00% success rate
INFO:     workflow.py:182   - âœ… Comprehensive follow-up execution completed
INFO:     workflow.py:188   - âœ¨ Response Enrichment: Enriching response
INFO:     response_enrichment_agent.py:26    - âœ¨ Enriching response
INFO:     response_enrichment_agent.py:30    - ğŸ¤– Calling LLM to generate enriched response...
INFO:     response_enrichment_agent.py:35    - ğŸŒŠ Using streaming mode for response generation
INFO:     llm_client.py:515   - ğŸ” DEBUG search_changelogs - result keys: ['changelogs', 'count', 'count_is_exact', 'is_limited', 'page', 'page_size', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG search_changelogs - found 'changelogs' array with 20 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 20 changelogs for search_changelogs
INFO:     llm_client.py:719   - ğŸ” Preprocessed search_changelogs: 20 items
INFO:     llm_client.py:515   - ğŸ” DEBUG get_changelog_by_resource - result keys: ['resource_id', 'changelogs', 'count', 'timestamp', 'tool', 'parameters', 'success']
INFO:     llm_client.py:520   - ğŸ” DEBUG get_changelog_by_resource - found 'changelogs' array with 4 items
INFO:     llm_client.py:546   - ğŸ“‹ Preprocessed 4 changelogs for get_changelog_by_resource
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_changelog_by_resource: 4 items
INFO:     llm_client.py:719   - ğŸ” Preprocessed get_notifications_by_resource: 0 items
INFO:     llm_client.py:722   - ğŸ” Empty check: empty_results=4, total_tools=8, empty_list=['get_resource_version', 'get_resource_metadata', 'get_resource_tickets', 'get_notifications_by_resource']
INFO:     response_enrichment_agent.py:41    - ğŸ” LLM response type: <class 'dict'>, value: {'final_response': 'The change event \'dev.update_product_price\' is associated with the resource identified as **dev.update_product_price**, which is a procedure within the \'dev\' schema. This resou
INFO:     response_enrichment_agent.py:54    - ğŸ“ LLM generated response: 913 chars
INFO:     response_enrichment_agent.py:92    - âœ… Response enrichment completed with 3 forward links
INFO:     workflow.py:213   - ğŸ¯ Orchestrator: Finalizing workflow
INFO:     workflow.py:295   - âœ… Processing completed successfully
INFO:     graph.py:145   - {"timestamp": "2025-12-03T10:02:15.953251", "uuid": "exist-complex-pair-rush", "llm_method": "enhanced_workflow", "sent": "The change event 'dev.update_product_price' is associated with the resource identified as **dev.upda"}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T12:07:58.869109", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T12:07:58.872681", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T12:07:58.873168", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T12:08:02.059063", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T12:08:02.059406", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T17:16:45.376179", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T17:16:45.385645", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T17:16:45.403439", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T17:16:48.610663", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T17:16:48.611270", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T18:16:41.862527", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T18:16:41.969728", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T18:16:41.972931", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T18:16:45.087597", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T18:16:45.088139", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T19:06:21.593978", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T19:06:21.598418", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T19:06:21.598619", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T19:06:24.931974", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T19:06:24.932697", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
ERROR:     server.py:73    - {"timestamp": "2025-12-03T20:18:34.098196", "uuid": "exist-complex-pair-rush", "op": "Error: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')"}
INFO:     server.py:77    - {"timestamp": "2025-12-03T20:18:34.101247", "uuid": "exist-complex-pair-rush", "op": "Closing connection."}
ERROR:     server.py:82    - {"timestamp": "2025-12-03T20:18:34.101450", "uuid": "exist-complex-pair-rush", "op": "WebSocket close error: Unexpected ASGI message 'websocket.close', after sending 'websocket.close' or response already completed."}
INFO:     server.py:53    - {"timestamp": "2025-12-03T20:18:37.636811", "uuid": null, "received": {"uuid": "exist-complex-pair-rush", "init": true}}
INFO:     server.py:64    - {"timestamp": "2025-12-03T20:18:37.637079", "uuid": "exist-complex-pair-rush", "op": "Initializing ws with client."}
